(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{195:function(e,t,s){},248:function(e,t,s){"use strict";s.r(t);var a=s(31),r=s(17),o=s(22),l=s(19),c=s(18),n=s(20),i=s(5),m=s(44),g=s(0),u=s.n(g),p=s(11),h=s(2),d=s(12),f=s(21),L=function(e){function t(e){var s;return Object(r.a)(this,t),(s=Object(l.a)(this,Object(c.a)(t).call(this,e))).promote=function(e){e.preventDefault();var t=s.state.id;h.a.post("/users/promote?id="+t,t,function(e){e.success?(s.setState({role:"ADMIN"}),d.toast.success(u.a.createElement(f.d.successToast,{text:e.message}),{position:d.toast.POSITION.TOP_RIGHT})):d.toast.error(u.a.createElement(f.d.errorToast,{text:e.message}),{position:d.toast.POSITION.TOP_RIGHT})}).catch(function(e){d.toast.error(u.a.createElement(f.d.errorToast,{text:"Internal Server Error: ".concat(e.message)}),{position:d.toast.POSITION.TOP_RIGHT}),403===e.status&&"Your JWT token is expired. Please log in!"===e.message&&(localStorage.clear(),s.props.history.push("/login"))})},s.demote=function(e){e.preventDefault();var t=s.state.id;h.a.post("/users/demote?id="+t,t,function(e){e.success?(s.setState({role:"USER"}),d.toast.success(u.a.createElement(f.d.successToast,{text:e.message}),{position:d.toast.POSITION.TOP_RIGHT})):d.toast.error(u.a.createElement(f.d.errorToast,{text:e.message}),{position:d.toast.POSITION.TOP_RIGHT})}).catch(function(e){d.toast.error(u.a.createElement(f.d.errorToast,{text:"Internal Server Error: ".concat(e.message)}),{position:d.toast.POSITION.TOP_RIGHT}),403===e.status&&"Your JWT token is expired. Please log in!"===e.message&&(localStorage.clear(),s.props.history.push("/login"))})},s.render=function(){return u.a.createElement("tr",{className:"row"},u.a.createElement("td",{className:"col-md-1 font-weight-bold"},s.state.index),u.a.createElement("td",{className:"col-md-2",style:{color:"#40a3f4"}},s.state.username),u.a.createElement("td",{className:"col-md-2 py-auto"},s.state.method),u.a.createElement("td",{className:"col-md-2"},s.state.action),u.a.createElement("td",{className:"col-md-2"},s.state.tableName),u.a.createElement("td",{className:"col-md-3"},s.state.time))},s.state={id:"",username:"",method:"",tableName:"",action:"",time:""},s.promote=s.promote.bind(Object(i.a)(Object(i.a)(s))),s.demote=s.demote.bind(Object(i.a)(Object(i.a)(s))),s}return Object(n.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(p.a)({},this.props))}}]),t}(g.Component),E=(s(195),s(6)),b=s(45),y=s(24),N=s(42),O=s(139),A=s(1);function S(e){return{type:A.rb,payload:e}}function T(e,t,s,a){return{type:A.qb,error:e,message:t,status:s,path:a}}function U(){return function(e){return e({type:A.pb}),h.a.get("/logs/all",function(t){if(t.error){var s=t.error,a=t.message,r=t.status,o=t.path;e(T(s,a,r,o))}else e(S(t))}).catch(function(t){403===t.status&&"Your JWT token is expired. Please log in!"===t.message&&localStorage.clear(),e(T("","Error: ".concat(t.message),t.status,""))})}}function v(e,t,s,a){return{type:A.Fb,error:e,message:t,status:s,path:a}}function j(e){return function(t){return t({type:A.Eb}),h.a.get("/logs/findByUserName/"+e,function(s){if(s.error){var a=s.error,r=s.message,o=s.status,l=s.path;t(v(a,r,o,l))}else t(S(s)),t(function(e,t){return{type:A.Gb,payload:e,message:'Successfully loaded logs for "'.concat(t,'".')}}(s,e))}).catch(function(e){403===e.status&&"Your JWT token is expired. Please log in!"===e.message&&localStorage.clear(),t(v("","Error: ".concat(e.message),e.status,""))})}}function I(e,t,s,a){return{type:A.F,error:e,message:t,status:s,path:a}}function B(e){return function(t){return t({type:A.E}),h.a.delete("/logs/clearByName/"+e,{},function(e){if(e.error){var s=e.error,a=e.message,r=e.status,o=e.path;t(I(s,a,r,o))}else t(function(e){return{type:A.G,payload:e}}(e)),t(U())}).catch(function(e){403===e.status&&"Your JWT token is expired. Please log in!"===e.message&&localStorage.clear(),t(I("","Error: ".concat(e.message),e.status,""))})}}function x(e,t,s,a){return{type:A.I,error:e,message:t,status:s,path:a}}function P(){return function(e){return e({type:A.H}),h.a.delete("/logs/clear",{},function(t){if(t.error){var s=t.error,a=t.message,r=t.status,o=t.path;e(x(s,a,r,o))}else e(function(e){return{type:A.J,payload:e}}(t))}).catch(function(t){403===t.status&&"Your JWT token is expired. Please log in!"===t.message&&localStorage.clear(),e(x("","Error: ".concat(t.message),t.status,""))})}}function k(){var e=Object(m.a)(["\n        display: block;\n        margin: 0 auto;\n        border-color: red;\n"]);return k=function(){return e},e}var C=Object(E.css)(k()),H=function(e){function t(e){var s;return Object(r.a)(this,t),(s=Object(l.a)(this,Object(c.a)(t).call(this,e))).loadAllLogs=function(){s.setState({selected:"",search:""},function(){return s.props.loadAllLogs()})},s.searchLogs=function(){var e=s.state.search;e?s.setState({selected:e},function(){return s.props.loadLogsByUserName(e)}):s.props.loadAllLogs()},s.clearAllLogs=function(){s.props.deleteAllLogs()},s.clearSelectedLogs=function(){var e=s.state.selected;e&&s.props.deleteLogsByUserName(e)},s.state={search:"",selected:""},s.onChangeHandler=s.onChangeHandler.bind(Object(i.a)(Object(i.a)(s))),s.loadAllLogs=s.loadAllLogs.bind(Object(i.a)(Object(i.a)(s))),s.searchLogs=s.searchLogs.bind(Object(i.a)(Object(i.a)(s))),s.clearAllLogs=s.clearAllLogs.bind(Object(i.a)(Object(i.a)(s))),s.clearSelectedLogs=s.clearSelectedLogs.bind(Object(i.a)(Object(i.a)(s))),s}return Object(n.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadAllLogs();var e=h.b.getUserId();e!==this.props.timeLineUserData.id&&(this.props.changeTimeLineUser(e),this.props.changeAllPictures(e),this.props.changeAllFriends(e))}},{key:"componentDidUpdate",value:function(e,t){var s=this.getErrorMessage(e),a=this.getSuccessMessage(e);s?d.toast.error(u.a.createElement(f.d.errorToast,{text:s}),{position:d.toast.POSITION.TOP_RIGHT}):a&&(console.log("this.state: ",this.state),d.toast.success(u.a.createElement(f.d.successToast,{text:a}),{position:d.toast.POSITION.TOP_RIGHT}))}},{key:"getSuccessMessage",value:function(e){return this.state.search||this.props.fetchAllLogs.hasError||!this.props.fetchAllLogs.message||this.props.fetchAllLogs===e.fetchAllLogs?!this.props.findLogsByUserName.hasError&&this.props.findLogsByUserName.message&&this.props.findLogsByUserName!==e.findLogsByUserName?this.props.findLogsByUserName.message:!this.props.clearLogsByUserName.hasError&&this.props.clearLogsByUserName.message&&this.props.clearLogsByUserName!==e.clearLogsByUserName?(this.setState({selected:"",search:""}),this.props.clearLogsByUserName.message):!this.props.clearAllLogs.hasError&&this.props.clearAllLogs.message&&this.props.clearAllLogs!==e.clearAllLogs?(this.setState({selected:"",search:""}),this.props.clearAllLogs.message):null:this.props.fetchAllLogs.message}},{key:"getErrorMessage",value:function(e){return this.props.fetchAllLogs.hasError&&e.fetchAllLogs.error!==this.props.fetchAllLogs.error?this.props.fetchAllLogs.message||"Server Error":this.props.findLogsByUserName.hasError&&e.findLogsByUserName.error!==this.props.findLogsByUserName.error?(this.setState({selected:""}),this.props.findLogsByUserName.message||"Server Error"):this.props.clearLogsByUserName.hasError&&e.clearLogsByUserName.error!==this.props.clearLogsByUserName.error?this.props.clearLogsByUserName.message||"Server Error":this.props.clearAllLogs.hasError&&e.clearAllLogs.error!==this.props.clearAllLogs.error?this.props.clearAllLogs.message||"Server Error":null}},{key:"onChangeHandler",value:function(e){this.setState(Object(a.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this,t=this.props.fetchAllLogs.loading||this.props.findLogsByUserName.loading||this.props.clearLogsByUserName.loading||this.props.clearAllLogs.loading,s=this.state.selected;return u.a.createElement(g.Fragment,null,u.a.createElement("article",{className:"main-article-shared-content"},u.a.createElement("section",{className:"logs-content-section"},u.a.createElement("div",{className:"container col-md-11 text-center mx-auto mb-4"},u.a.createElement("h1",{className:"text-center font-weight-bold mt-4",style:{margin:"1rem auto"}},"Server Logs History"),u.a.createElement("div",{className:"hr-styles"}),u.a.createElement("div",{className:"col-md-4 mx-auto mb-3"},u.a.createElement("label",{className:"form-control-label font-weight-bold",htmlFor:"search"},"Enter Username:"),u.a.createElement("input",{className:"form-control mx-auto",type:"search",placeholder:"Search","aria-label":"Search",name:"search",id:"search",value:this.state.search,onChange:this.onChangeHandler,style:{background:"#EEE"}})),u.a.createElement("div",{className:"col-md-5 d-flex justify-content-center mx-auto mb-5"},u.a.createElement("h5",null,u.a.createElement("button",{className:"btn update-info m-1",onClick:this.searchLogs},"SEARCH")),u.a.createElement("h5",null,u.a.createElement("button",{className:"btn update-info m-1",onClick:this.loadAllLogs},"ALL LOGS")),h.b.isRoot()&&this.props.logsArr.length>0&&u.a.createElement("h5",null,u.a.createElement("button",{className:"btn update-info m-1",onClick:this.clearAllLogs},"CLEAR ALL")),h.b.isRoot()&&s&&u.a.createElement("h5",null,u.a.createElement("button",{className:"btn update-info m-1",onClick:this.clearSelectedLogs},"CLEAR SELECTED"))),this.props.logsArr.length>0?u.a.createElement("table",{className:"table table-hover mt-3 w-80 mx-auto text-center"},u.a.createElement("thead",null,u.a.createElement("tr",{className:"row "},u.a.createElement("th",{className:"col-md-1 ",scope:"col"},"#"),u.a.createElement("th",{className:"col-md-2",scope:"col"},"Username"),u.a.createElement("th",{className:"col-md-2 ",scope:"col"},"Method"),u.a.createElement("th",{className:"col-md-2 ",scope:"col"},"Action"),u.a.createElement("th",{className:"col-md-2",scope:"col"},"Modified Table"),u.a.createElement("th",{className:"col-md-3 ",scope:"col"},"Time"))),u.a.createElement("tbody",null,t?u.a.createElement(b.CircleLoader,{css:C,sizeUnit:"px",size:150,color:"#61dafb",loading:!0}):this.props.logsArr.map(function(t,s){return u.a.createElement(L,Object.assign({key:t.id,index:s+1},e.props,t))}))):t?u.a.createElement(g.Fragment,null,u.a.createElement(b.CircleLoader,{css:C,sizeUnit:"px",size:150,color:"#61dafb",loading:!0})):u.a.createElement(g.Fragment,null,u.a.createElement("div",{className:"hr-styles"}),u.a.createElement("h3",{className:"mt-5 mb-5 mx-auto display-5 text-center App-secondary-color"},"Logs history is empty. "),u.a.createElement("div",{className:"hr-styles"}))))))}}]),t}(g.Component);t.default=Object(y.b)(function(e){return{timeLineUserData:e.timeLineUserData,loggedInUserData:e.loggedInUserData,fetchAllLogs:e.fetchAllLogs,logsArr:e.fetchAllLogs.logsArr,findLogsByUserName:e.findLogsByUserName,clearLogsByUserName:e.clearLogsByUserName,clearAllLogs:e.clearAllLogs}},function(e){return{changeTimeLineUser:function(t){e(Object(N.d)(t))},changeAllFriends:function(t){e(Object(N.c)(t))},changeAllPictures:function(t){e(Object(O.b)(t))},loadAllLogs:function(){e(U())},loadLogsByUserName:function(t){e(j(t))},deleteLogsByUserName:function(t){e(B(t))},deleteAllLogs:function(){e(P())}}})(H)}}]);
//# sourceMappingURL=14.d695d2ec.chunk.js.map