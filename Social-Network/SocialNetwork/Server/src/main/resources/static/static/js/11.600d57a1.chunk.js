(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{147:function(e,t,a){},163:function(e,t,a){"use strict";function r(e,t){if(null==e)return{};var a,r,s=function(e,t){if(null==e)return{};var a,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}a.d(t,"a",function(){return r})},245:function(e,t,a){"use strict";a.r(t);var r=a(163),s=a(32),i=a(11),n=a(17),l=a(22),o=a(19),m=a(18),c=a(20),d=a(5),p=a(0),u=a.n(p),h=a(9),g=a(2),f=a(12),b=a(21),U=(a(147),a(24)),N=a(42),y=a(139),E=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){var e=a.props.match.params.id;e!==a.props.timeLineUserData.id&&(a.props.changeTimeLineUser(e),a.props.changeAllPictures(e),a.props.changeAllFriends(e))},a.handleBlur=function(e){return function(t){a.setState({touched:Object(i.a)({},a.state.touched,Object(s.a)({},e,!0))})}},a.validate=function(e,t,a,r,s,i,n,l){var o=/^[A-Z]([a-zA-Z]+)?$/,m=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/.test(t),c=o.test(a),d=o.test(r);return{username:e.length<4||e.length>16,email:0===t.length||!m,firstName:0===a.length||!c,lastName:0===r.length||!d,address:0===s.length,city:0===i.length,profilePicUrl:0===n.length,backgroundImageUrl:0===l.length}},a.state={id:a.props.timeLineUserData.id,username:a.props.timeLineUserData.username,email:a.props.timeLineUserData.email,firstName:a.props.timeLineUserData.firstName,lastName:a.props.timeLineUserData.lastName,address:a.props.timeLineUserData.address,city:a.props.timeLineUserData.city,profilePicUrl:a.props.timeLineUserData.profilePicUrl,backgroundImageUrl:a.props.timeLineUserData.backgroundImageUrl,touched:{username:!1,email:!1,firstName:!1,lastName:!1,address:!1,city:!1,profilePicUrl:!1,backgroundImageUrl:!1}},a.onChangeHandler=a.onChangeHandler.bind(Object(d.a)(Object(d.a)(a))),a.onSubmitHandler=a.onSubmitHandler.bind(Object(d.a)(Object(d.a)(a))),a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.changeTimeLineUserData.loading||this.props.changeAllFriends.loading||this.props.changePicture.loading||this.props.timeLineUserData.id===this.state.id||this.setState({id:this.props.timeLineUserData.id,username:this.props.timeLineUserData.username,email:this.props.timeLineUserData.email,firstName:this.props.timeLineUserData.firstName,lastName:this.props.timeLineUserData.lastName,address:this.props.timeLineUserData.address,city:this.props.timeLineUserData.city,profilePicUrl:this.props.timeLineUserData.profilePicUrl,backgroundImageUrl:this.props.timeLineUserData.backgroundImageUrl});var a=this.getErrorMessage(e),r=this.getSuccessMessage(e);a?(f.toast.error(u.a.createElement(b.d.errorToast,{text:a}),{position:f.toast.POSITION.TOP_RIGHT}),this.setState({id:this.props.timeLineUserData.id,username:this.props.timeLineUserData.username,email:this.props.timeLineUserData.email,firstName:this.props.timeLineUserData.firstName,lastName:this.props.timeLineUserData.lastName,address:this.props.timeLineUserData.address,city:this.props.timeLineUserData.city,profilePicUrl:this.props.timeLineUserData.profilePicUrl,backgroundImageUrl:this.props.timeLineUserData.backgroundImageUrl})):r&&(f.toast.success(u.a.createElement(b.d.successToast,{text:r}),{position:f.toast.POSITION.TOP_RIGHT}),this.props.history.push("/home/profile/".concat(this.state.id)))}},{key:"getSuccessMessage",value:function(e){return!this.props.updateUserData.hasError&&this.props.updateUserData.message&&this.props.updateUserData!==e.updateUserData?this.props.updateUserData.message:null}},{key:"getErrorMessage",value:function(e){return this.props.updateUserData.hasError&&e.updateUserData.error!==this.props.updateUserData.error?this.props.updateUserData.message||"Server Error":null}},{key:"onChangeHandler",value:function(e){this.setState(Object(s.a)({},e.target.name,e.target.value))}},{key:"onSubmitHandler",value:function(e){if(e.preventDefault(),this.canBeSubmitted()){var t=this.state,a=(t.touched,Object(r.a)(t,["touched"])),s=this.props.loggedInUserData.id;this.props.updateUser(s,a)}}},{key:"canBeSubmitted",value:function(){var e=this.state,t=e.username,a=e.email,r=e.firstName,s=e.lastName,i=e.address,n=e.city,l=e.profilePicUrl,o=e.backgroundImageUrl,m=this.validate(t,a,r,s,i,n,l,o);return!Object.keys(m).some(function(e){return m[e]})}},{key:"render",value:function(){var e=this,t=this.state,a=t.username,r=t.email,s=t.firstName,i=t.lastName,n=t.address,l=t.city,o=t.profilePicUrl,m=t.backgroundImageUrl,c=g.b.getUsername(),d=g.b.getRole(),f=g.b.isAdmin(),b=g.b.isRoot(),U=!0;c!==a&&"ROOT"!==d&&(U=!1);var N=this.validate(a,r,s,i,n,l,o,m),y=!Object.keys(N).some(function(e){return N[e]}),E=function(t){var a=N[t],r=e.state.touched[t];return!!a&&r};return u.a.createElement(p.Fragment,null,u.a.createElement("article",{className:"main-article-shared-content"},u.a.createElement("section",{className:"form-content-section"},u.a.createElement("div",{className:"container mb-4"},u.a.createElement("h1",{className:"text-center font-weight-bold mt-4",style:{margin:"1rem auto"}},"Edit Account"),u.a.createElement("div",{className:"hr-styles"}),u.a.createElement("form",{className:"Register-form-container  ",onSubmit:this.onSubmitHandler},u.a.createElement("div",{className:"section-container w-100 mx-auto text-center"},u.a.createElement("section",{className:"left-section"},u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{htmlFor:"firstName",className:"font-weight-bold"},"First Name"),u.a.createElement("input",{type:"text",className:"form-control "+(E("firstName")?"error":""),id:"firstName",name:"firstName",value:this.state.firstName,onChange:this.onChangeHandler,onBlur:this.handleBlur("firstName"),"aria-describedby":"firstNameHelp",placeholder:"Enter first name"}),E("firstName")&&u.a.createElement("small",{id:"firstNameHelp",className:"form-text alert alert-danger"},this.state.firstName?"First Name must start with a capital letter and contain only letters!":"First Name is required!")),u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{htmlFor:"address",className:"font-weight-bold"},"Address"),u.a.createElement("input",{type:"text",className:"form-control "+(E("address")?"error":""),id:"address",name:"address",value:this.state.address,onChange:this.onChangeHandler,onBlur:this.handleBlur("address"),"aria-describedby":"addressHelp",placeholder:"Enter address"}),E("address")&&u.a.createElement("small",{id:"addressHelp",className:"form-text alert alert-danger"},this.state.address?"":"Address is required!")),U&&u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{htmlFor:"profilePicUrl",className:"font-weight-bold"},"Profile image url"),u.a.createElement("input",{type:"text",className:"form-control "+(E("profilePicUrl")?"error":""),id:"profilePicUrl",name:"profilePicUrl",value:this.state.profilePicUrl,onChange:this.onChangeHandler,onBlur:this.handleBlur("profilePicUrl"),"aria-describedby":"profilePicUrlHelp",placeholder:"Enter profile image url"}),E("profilePicUrl")&&u.a.createElement("small",{id:"profilePicUrl",className:"form-text alert alert-danger"},this.state.profilePicUrl?"":"Profile Image Url is required!"))),u.a.createElement("section",{className:"right-section"},u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{htmlFor:"lastName",className:"font-weight-bold"},"Last Name"),u.a.createElement("input",{type:"text",className:"form-control "+(E("lastName")?"error":""),id:"lastName",name:"lastName",value:this.state.lastName,onChange:this.onChangeHandler,onBlur:this.handleBlur("lastName"),"aria-describedby":"lastNameHelp",placeholder:"Enter last name"}),E("lastName")&&u.a.createElement("small",{id:"lastNameHelp",className:"form-text alert alert-danger"},this.state.lastName?"Last Name must start with a capital letter and contain only letters!":"Last Name is required!")),u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{htmlFor:"city",className:"font-weight-bold"},"City"),u.a.createElement("input",{type:"text",className:"form-control "+(E("city")?"error":""),id:"city",name:"city",value:this.state.city,onChange:this.onChangeHandler,onBlur:this.handleBlur("city"),"aria-describedby":"cityHelp",placeholder:"Enter city"}),E("city")&&u.a.createElement("small",{id:"cityHelp",className:"form-text alert alert-danger"},this.state.city?"":"City is required!")),U&&u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{htmlFor:"backgroundImageUrl",className:"font-weight-bold"},"Cover image url"),u.a.createElement("input",{type:"text",className:"form-control "+(E("backgroundImageUrl")?"error":""),id:"backgroundImageUrl",name:"backgroundImageUrl",value:this.state.backgroundImageUrl,onChange:this.onChangeHandler,onBlur:this.handleBlur("backgroundImageUrl"),"aria-describedby":"backgroundImageUrlHelp",placeholder:"Enter cover image url"}),E("backgroundImageUrl")&&u.a.createElement("small",{id:"backgroundImageUrlHelp",className:"form-text alert alert-danger"},this.state.backgroundImageUrl?"":"Cover Image Url is required!")))),u.a.createElement("div",{className:"hr-styles"}),u.a.createElement("div",{className:"text-center"},u.a.createElement("button",{disabled:!y,type:"submit",className:"btn App-button-primary btn-lg m-3"},"Edit"),u.a.createElement(h.b,{className:"btn App-button-primary btn-lg m-3",to:"/home/profile/".concat(this.props.id),role:"button"},"Cancel"),(f||b)&&u.a.createElement(h.b,{className:"btn App-button-primary btn-lg m-3",to:"/home/users/all/".concat(g.b.getUserId()),role:"button"},"All Users")))))))}}]),t}(p.Component);t.default=Object(U.b)(function(e){return{timeLineUserData:e.timeLineUserData,loggedInUserData:e.loggedInUserData,updateUserData:e.updateUserData,changeTimeLineUserData:e.changeTimeLineUserData,changePicture:e.changePicture,changeAllFriends:e.changeAllFriends}},function(e){return{updateUser:function(t,a){e(Object(N.q)(t,a))},changeTimeLineUser:function(t){e(Object(N.d)(t))},changeAllFriends:function(t){e(Object(N.c)(t))},changeAllPictures:function(t){e(Object(y.b)(t))}}})(E)}}]);
//# sourceMappingURL=11.600d57a1.chunk.js.map